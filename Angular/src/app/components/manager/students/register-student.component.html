<h1 mat-dialog-title>Rejestracja ucznia</h1>
<form [formGroup]="registerStudentForm" (ngSubmit)="onSubmit()">
  <mat-dialog-content>
    <mat-form-field>
      <mat-label>Nazwa użytkownika</mat-label>
      <input matInput id="username" formControlName="username" placeholder="Wpisz nazwę użytkownika" />
      @if (registerStudentForm.get('username')?.hasError('minlength')) {
        <mat-error>
          Nazwa użytkownika musi mieć co najmniej 3 znaki
        </mat-error>
      }
      @if (registerStudentForm.get('username')?.hasError('usernameTaken')) {
        <mat-error>
          Ta nazwa użytkownika jest już zajęta
        </mat-error>
      }
    </mat-form-field>

    <mat-form-field>
      <mat-label>Email</mat-label>
      <input matInput id="email" formControlName="email" placeholder="Wpisz adres email" type="email" />
      @if (registerStudentForm.get('email')?.hasError('emailTaken')) {
        <mat-error>
          Ten email jest już zajęty
        </mat-error>
      }
    </mat-form-field>

    <mat-form-field>
      <mat-label>Hasło</mat-label>
      <input matInput id="password" formControlName="password" placeholder="Wpisz hasło" type="password" />
      @if (registerStudentForm.get('password')?.hasError('minlength')) {
        <mat-error>
          Hasło musi mieć co najmniej 6 znaków
        </mat-error>
      }
    </mat-form-field>

    <mat-form-field>
      <mat-label>Potwierdź hasło</mat-label>
      <input matInput id="confirmPassword" formControlName="confirmPassword" placeholder="Potwierdź hasło" type="password" />
      @if (registerStudentForm.get('confirmPassword')?.hasError('passwordMismatch')) {
        <mat-error>
          Hasła nie są takie same
        </mat-error>
      }
    </mat-form-field>

    <mat-form-field>
      <mat-label>Imię</mat-label>
      <input matInput id="firstName" formControlName="firstName" placeholder="Wpisz imię" />
    </mat-form-field>

    <mat-form-field>
      <mat-label>Nazwisko</mat-label>
      <input matInput id="lastName" formControlName="lastName" placeholder="Wpisz nazwisko" />
    </mat-form-field>

    <mat-form-field class="full-width">
      <mat-label>Płeć</mat-label>
      <mat-select formControlName="gender">
        @for (gender of genders; track gender) {
          <mat-option [value]="gender">{{ gender }}</mat-option>
        }
      </mat-select>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Telefon</mat-label>
      <input matInput id="phone" formControlName="phone" placeholder="Wpisz numer telefonu" type="text" />
      @if (registerStudentForm.get('phone')?.hasError('phoneTaken')) {
        <mat-error>
          Ten numer jest już zajęty
        </mat-error>
      }
    </mat-form-field>

    <mat-form-field class="full-width">
      <mat-label>Poziom kształcenia</mat-label>
      <mat-select formControlName="level">
        @for (level of educationLevels; track level) {
          <mat-option [value]="level">{{ level }}</mat-option>
        }
      </mat-select>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Telefon opiekuna</mat-label>
      <input matInput id="guardianPhone" formControlName="guardianPhone" placeholder="Wpisz telefon opiekuna" />
    </mat-form-field>

    <mat-form-field>
      <mat-label>Email opiekuna</mat-label>
      <input matInput id="guardianEmail" formControlName="guardianEmail" placeholder="Wpisz email opiekuna" type="email" />
    </mat-form-field>

    <mat-checkbox id="isCashPayment" formControlName="isCashPayment">Płatność gotówką</mat-checkbox>

    <mat-checkbox id="issueInvoice" formControlName="issueInvoice">Wystawienie faktury</mat-checkbox><br/>
  </mat-dialog-content>
  <mat-dialog-actions>
    <button mat-button (click)="onCancel()">Anuluj</button>
    <button mat-raised-button color="primary" type="submit" [disabled]="registerStudentForm.invalid">
      Zarejestruj
    </button>
</mat-dialog-actions>
</form>